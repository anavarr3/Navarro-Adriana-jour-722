schoolmoney <- cleaned_payments |>
group_by(vendor_name) |>
summarise(
count = n())|>
filter(str_detect(vendor_name, "GEORGE'S")|
str_detect(vendor_name, "GEORGE")|
str_detect(vendor_name, "PG"),
str_detect(vendor_name, "EDUCATION")|
str_detect(vendor_name, "SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
count = n())|>
schoolmoney <- cleaned_payments |>
group_by(vendor_name) |>
summarise(
count = n())|>
filter(str_detect(vendor_name, "GEORGE'S")|
str_detect(vendor_name, "GEORGE")|
str_detect(vendor_name, "PG"),
str_detect(vendor_name, "EDUCATION")|
str_detect(vendor_name, "SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "GEORGE'S")|
str_detect(vendor_name, "GEORGE")|
str_detect(vendor_name, "PG"),
str_detect(vendor_name, "EDUCATION")|
str_detect(vendor_name, "SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S")|
str_detect(vendor_name, "PRINCE GEORGE")|
str_detect(vendor_name, "PG"),
str_detect(vendor_name, "EDUCATION")|
str_detect(vendor_name, "SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S")|
str_detect(vendor_name, "PRINCE GEORGE")|
str_detect(vendor_name, "PG"),
str_detect(vendor_name, "EDUCATION")|
str_detect(vendor_name, "SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S| PRINCE GEORGE| PG"),
str_detect(vendor_name, "EDUCATION| SCHOOL")|
)
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S | PRINCE GEORGE| PG"),
str_detect(vendor_name, "EDUCATION | SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S|PRINCE GEORGE| PG"),
str_detect(vendor_name, "EDUCATION|SCHOOL")
)
schoolmoney
schoolmoney <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S|PRINCE GEORGE|PG"),
str_detect(vendor_name, "EDUCATION|SCHOOL")
)
schoolmoney
pg_schools <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S|PRINCE GEORGE|PG"),
str_detect(vendor_name, "EDUCATION|SCHOOL")
)
schoolmoney
pg_schools <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S|PRINCE GEORGE|PG"),
str_detect(vendor_name, "EDUCATION|SCHOOL")
)
pg_schools
pg_schools <- cleaned_payments |>
filter(str_detect(vendor_name, "PRINCE GEORGE'S|PRINCE GEORGE|PG"),
str_detect(vendor_name, "EDUCATION|SCHOOL")
)
pg_schools
pg_schools
summarise(
group_by(fiscal_year)
count = n(amount)
pg_schools
group_by(fiscal_year) |>
summarise(
count = n(amount)) |>
arrange(desc(count))
pg_schools
group_by("fiscal_year") |>
summarise(
count = n(amount)) |>
arrange(desc(count))
pg_schools
group_by(fiscal_year) |>
summarise(
count = n(amount)) |>
arrange(desc(count))
pg_schools |>
group_by(fiscal_year) |>
summarise(
count = n(amount)) |>
arrange(desc(count))
pg_schools |>
group_by(fiscal_year) |>
summarise(
sum(amount))
|>
pg_schools |>
group_by(fiscal_year) |>
summarise(
sum(amount))
arrange(desc(count))
pg_schools |>
group_by(fiscal_year) |>
summarise(
sum(amount)) |>
arrange(desc(count))
pg_schools |>
group_by(fiscal_year) |>
summarise(
sum(amount)) |>
arrange(desc(sum))
pg_schools |>
group_by(fiscal_year) |>
summarise(
sum(amount)) |>
arrange(desc(amount))
pg_schools |>
group_by(fiscal_year) |>
sum(amount) |>
arrange(desc(amount))
pg_schools |>
group_by(fiscal_year) |>
summarise(count(n())
pg_schools |>
group_by(fiscal_year, amount) |>
sum(amount)) |>
pg_schools |>
group_by(fiscal_year, amount) |>
sum(amount) |>
arrange(desc(amount))
View(pg_schools)
pg_schools |>
group_by(fiscal_year, amount) |>
summarise(
sum(amount)) |>
arrange(desc(amount))
pg_schools |>
group_by(fiscal_year) |>
summarise(
sum(amount)) |>
arrange(desc(amount))
pg_schools |>
group_by(fiscal_year, vendor_name) |>
summarise(
sum(amount)) |>
arrange(desc(amount))
pg_schools |>
group_by(fiscal_year, amount) |>
summarise(
sum(amount)) |>
arrange(desc(amount))
pg_schools |>
group_by(fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
pg_schools |>
group_by(fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
umd_payments <- cleaned_payments |>
filter(str_detect(agency, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")
)
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")
)
umd_payments
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND") |>
count=(n(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND") |>
count = (n(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND") |>
summarise(total = sum(amount)) |>
)
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
summarise(total = sum(amount)) |>
umd_payments
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND") |>
summarise(total = sum(amount))
umd_payments
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND") |>
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND") |>
summarise(total = sum(amount)))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
summarise(total = sum(amount))
umd_payments
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(agency_name)
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(agency_name, amount)
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(vendor_name, amount)
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(vendor_name)
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(vendor_name, vendor_zip)
summarise(total = sum(amount))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(vendor_name, vendor_zip) |>
summarise(total = sum(amount))
umd_payments
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(vendor_name, vendor_zip) |>
summarise(total = sum(amount))
arrange(desc(total))
umd_payments <- cleaned_payments |>
filter(
str_detect(agency_name, "CAPITAL PROJECTS- UNIVERSITY OF MARYLAND")) |>
group_by(vendor_name, vendor_zip) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
umd_payments
View(cleaned_md_grants_loans)
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
group_by(ficsal_year, grantee_name, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
group_by(ficsal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
group_by(fiscal_year, grantee_name, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
group_by(fiscal_year, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
group_by(fiscal_year, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
# group_by(fiscal_year, grantee, amount) |>
# summarise(total = sum(amount)) |>
#arrange(desc(total))
cleaned_md_grants_loans
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"))
# group_by(fiscal_year, grantee, amount) |>
# summarise(total = sum(amount)) |>
#arrange(desc(total))
cleaned_md_grants_loans
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant,STEM CELL RESEARCH GRANT"))
# group_by(fiscal_year, grantee, amount) |>
# summarise(total = sum(amount)) |>
#arrange(desc(total))
cleaned_md_grants_loans
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"))
# group_by(fiscal_year, grantee, amount) |>
# summarise(total = sum(amount)) |>
#arrange(desc(total))
cleaned_md_grants_loans
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"))
# group_by(fiscal_year, grantee, amount) |>
# summarise(total = sum(amount)) |>
#arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"))
group_by(fiscal_year, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"))
group_by(fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT")) |>
group_by(fiscal_year, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"),
str_detect(grantor, "Maryland|MD|MARYLAND")) |>
group_by(fiscal_year, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"),
str_detect(grantor, "Maryland|MD|MARYLAND")) |>
group_by(fiscal_year, grantor, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"),
str_detect(grantor, "Maryland|MD|MARYLAND|state|STATE")) |>
group_by(fiscal_year, grantor, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"),
str_detect(grantor, "Maryland|MD|MARYLAND|state|STATE|department|DEPARTMENT")) |>
group_by(fiscal_year, grantor, grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"),
str_detect(grantor, "Maryland|MD|MARYLAND|state|STATE|department|DEPARTMENT")) |>
group_by(fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
cleaned_md_grants_loans |>
filter(
str_detect(description, "Stem Cell Research Grant|STEM CELL RESEARCH GRANT"),
str_detect(grantor, "Maryland|MD|MARYLAND|state|STATE|department|DEPARTMENT")) |>
group_by(fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001")), |>
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001")) |>
group_by(grantees)
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001")) |>
group_by(grantee)
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001")) |>
group_by(grantee)
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee)
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee, amount, fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee, fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee, fiscal_year) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee, amount) |>
summarise(total = sum(amount)) |>
arrange(desc(fiscal_year))
cleaned_md_grants_loans |>
filter(
str_detect(zip_code, "20742|20742-0001|207420001|207423141")) |>
group_by(grantee) |>
summarise(total = sum(amount)) |>
arrange(desc(total))
knitr::opts_chunk$set(echo = TRUE)
install.packages('refinr')
# turn off sci notation
options(scipen=999)
library(tidyverse)
library(lubridate)
library(refinr)
# Load data
md_grant_loans <- read_csv("data/State_of_Maryland_Grant_and_Loan_Data__FY2009_to_FY2022.csv")
# Display it
md_grant_loans
# Now let's try and group and count the number of expenditures by recipient. To make it a bit more manageable, let's use another string function from `stringr` and filter for recipients that start with the uppercase "W" or lowercase "w" using the function `str_detect()` with a regular expression.
# The filter function in the codeblock below says: look in the Grantee column, and pluck out any value that starts with (the "^" symbol means "starts with") a lowercase "w" OR (the vertical "|", called a pipe, means OR) an uppercase "W".
md_grant_loans |>
group_by(Grantee) |>
summarise(
count=n()
) |>
filter(str_detect(Grantee, '^w|^W')) |>
arrange(Grantee)
cleaned_md_grant_loans <- md_grant_loans |>
mutate(grantee_clean=key_collision_merge(Grantee)) |>
select(Grantee, grantee_clean, everything())
cleaned_md_grant_loans
cleaned_md_grant_loans <- md_grant_loans |>
mutate(grantee_clean=key_collision_merge(Grantee)) |>
select(Grantee, grantee_clean, everything())
cleaned_md_grant_loans
setwd("~/Documents/GitHub/Navarro-Adriana-jour-722/pre_lab_04")
cleaned_md_grant_loans |>
group_by(Grantee, grantee_clean) |>
summarise(
count=n()
) |>
filter(str_detect(Grantee, '^w|^W')) |>
arrange(Grantee)
cleaned_md_grant_loans <- md_grant_loans |>
mutate(grantee_clean=n_gram_merge(Grantee)) |>
select(Grantee, grantee_clean, everything())
cleaned_md_grant_loans
cleaned_md_grant_loans |>
group_by(Grantee, grantee_clean) |>
summarise(
count=n()
) |>
filter(str_detect(Grantee, '^w|^W')) |>
arrange(Grantee)
cleaned_md_grant_loans <- md_grant_loans |>
mutate(grantee_clean=n_gram_merge(Grantee)) |>
select(Grantee, grantee_clean, everything())
cleaned_md_grant_loans
cleaned_md_grant_loans |>
group_by(Grantee, grantee_clean) |>
summarise(
count=n()
) |>
filter(str_detect(Grantee, '^w|^W')) |>
arrange(Grantee)
